<span>-- @path UML=</span><del style="background:#ffe6e6;">/UML2Intalio_correct/metamodels/UML2_3_0_0.ecore&para;<br>-- @path Intalio=/UML2Intalio_correct/metamodels/</del><ins style="background:#e6ffe6;">C:\Users\varaminz\Downloads\Project\workspaceTEST34\anatlyzer.atl.tests.api\trafo\UML2_3_0_0.ecore&para;<br>-- @path Intalio=C:\Users\varaminz\Downloads\Project\workspaceTEST34\anatlyzer.atl.tests.api\trafo\</ins><span>bpmn.ecore&para;<br></span><del style="background:#ffe6e6;">&para;<br></del><span>module UML2Intalio;&para;<br>create OUT : Intalio from IN : UML;&para;<br>&para;<br>helper context UML!NamedElement def: name : String =&para;<br>if self.name.oclIsUndefined() then&para;<br>''&para;<br>else&para;<br>self.name&para;<br>endif;&para;<br>&para;<br>helper context UML!NamedElement def: toIntalioName : String =&para;<br>self.name + '_' + self.oclType().name;&para;<br>&para;<br>helper context UML!Activity def</span><del style="background:#ffe6e6;"> </del><span>: allPartitions : Sequence(UML!ActivityPartition) =&para;<br>self.partition-&gt;collect(p |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>p.allPartitions</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)-&gt;flatten();&para;<br>&para;<br>helper context UML!ActivityPartition def</span><del style="background:#ffe6e6;"> </del><span>: allPartitions :</span><del style="background:#ffe6e6;"> </del><span> Sequence(UML!ActivityPartition) =&para;<br>self.subpartition-&gt;collect(p |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>p.allPartitions</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)-&gt;flatten();&para;<br>&para;<br>helper context UML!ExecutableNode def: language : String =</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>'';&para;<br>&para;<br>helper context UML!ActivityNode def</span><del style="background:#ffe6e6;"> </del><span>: transformed : Boolean =&para;<br>self.oclIsKindOf(UML!ExecutableNode) or</span><del style="background:#ffe6e6;">&para;<br>(</del><ins style="background:#e6ffe6;"> </ins><span>self.oclIsKindOf(UML!InitialNode) and self.incoming-&gt;isEmpty()</span><del style="background:#ffe6e6;">)</del><span> or</span><del style="background:#ffe6e6;">&para;<br>(</del><ins style="background:#e6ffe6;"> </ins><span>self.oclIsKindOf(UML!InitialNode) and self.incoming-&gt;exists(edge |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>edge.source.oclIsKindOf(UML!AcceptEventAction)</span><del style="background:#ffe6e6;">))</del><span>&para;<br></span><ins style="background:#e6ffe6;">)</ins><span>;&para;<br>&para;<br>rule activity2diagram {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>a : UML!Activity&para;<br>to</span><del style="background:#ffe6e6;">   </del><ins style="background:#e6ffe6;">&para;<br></ins><span>d : Intalio!BpmnDiagram (&para;<br></span><del style="background:#ffe6e6;">name</del><ins style="background:#e6ffe6;">pools</ins><span> &lt;- a.</span><del style="background:#ffe6e6;">name</del><ins style="background:#e6ffe6;">owner</ins><span>,&para;<br>pools &lt;- a.allPartitions,&para;<br>artifacts &lt;- UML!ObjectNode.allInstances()&para;<br>)&para;<br>}&para;<br>&para;<br>rule activitypartition2pool {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>a : UML!ActivityPartition&para;<br>to</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>p : Intalio!Pool,&para;<br>l : Intalio!Lane (&para;<br>activities &lt;- a.node-&gt;reject(e |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>e.oclIsKindOf(UML!ObjectNode)</span><del style="background:#ffe6e6;">)</del><span>&para;<br></span><ins style="background:#e6ffe6;">)</ins><span>-&gt;select(e |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>e.transformed</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)&para;<br>)&para;<br>}&para;<br>&para;<br>rule opaqueaction {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>n : UML!OpaqueAction&para;<br>to</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>a : Intalio!Activity (&para;<br>name &lt;- n.toIntalioName&para;<br>)&para;<br>}&para;<br>&para;<br>rule initialnode {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>n : UML!InitialNode</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>(&para;<br>not n.incoming-&gt;exists(edge |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>edge.source.oclIsKindOf(UML!AcceptEventAction)</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)&para;<br>)&para;<br>to</span><del style="background:#ffe6e6;">	</del><ins style="background:#e6ffe6;">&para;<br></ins><span>a : Intalio!Activity (&para;<br>name &lt;- n.toIntalioName,&para;<br>activityType &lt;- #EventStartEmpty&para;<br>)&para;<br>}&para;<br>&para;<br>rule edges {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>f : UML!ControlFlow</span><del style="background:#ffe6e6;"> (</del><ins style="background:#e6ffe6;">&para;<br>(&para;<br></ins><span>f.source.transformed and f.target.transformed</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)&para;<br>to</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>e : Intalio!SequenceEdge (&para;<br>source &lt;- f.source,&para;<br>target &lt;- f.target&para;<br>)&para;<br>}&para;<br>&para;<br></span><del style="background:#ffe6e6;">-- extra rules -----------------------------------------------------------&para;<br>&para;<br></del><span>rule initialnode_message {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>n : UML!InitialNode</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>(&para;<br>n.incoming-&gt;exists(edge |&para;<br>if edge.source.oclIsKindOf(UML!AcceptEventAction) then&para;<br>not edge.source.trigger-&gt;exists(t |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>t.event.oclIsKindOf(UML!TimeEvent)</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)&para;<br>else&para;<br>false&para;<br>endif&para;<br>)&para;<br>)&para;<br>to</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>activity : Intalio!Activity</span><ins style="background:#e6ffe6;"> </ins><span>(&para;<br>activityType &lt;- #EventStartMessage,&para;<br>name &lt;- n.toIntalioName</span><ins style="background:#e6ffe6;">,&para;<br>associations &lt;- n.inGroup</ins><span>&para;<br>)&para;<br>}&para;<br>&para;<br>rule initialnode_timer {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>n : UML!InitialNode</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>(&para;<br>n.incoming-&gt;exists(edge |&para;<br>if edge.source.oclIsKindOf(UML!AcceptEventAction) then&para;<br>edge.source.oclAsType(UML!</span><del style="background:#ffe6e6;">AcceptEventAc</del><ins style="background:#e6ffe6;">ProtocolTransi</ins><span>tion).trigger-&gt;exists(t |</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>t.event.oclIsKindOf(UML!TimeEvent)</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)&para;<br>else&para;<br>false&para;<br>endif&para;<br>)&para;<br>)&para;<br>to</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>activity : Intalio!Activity</span><ins style="background:#e6ffe6;"> </ins><span>(&para;<br>activityType &lt;- #EventStartTimer,&para;<br>name &lt;- n.toIntalioName&para;<br>)&para;<br>}&para;<br>&para;<br>rule executable2activity {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>n : UML!ExecutableNode</span><del style="background:#ffe6e6;"> (</del><ins style="background:#e6ffe6;">&para;<br>(&para;<br></ins><span>not n.oclIsTypeOf(UML!OpaqueAction)</span><ins style="background:#e6ffe6;">&para;<br></ins><span>)&para;<br>to</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>a : Intalio!</span><del style="background:#ffe6e6;">Activity (&para;<br>name</del><ins style="background:#e6ffe6;">BpmnDiagram (&para;<br>author</ins><span> &lt;- n.toIntalioName</span><ins style="background:#e6ffe6;">.toString()</ins><span> + '_exec_' + n.language</span><ins style="background:#e6ffe6;">.toString()</ins><span>&para;<br>)&para;<br>}&para;<br>&para;<br>rule objectnode {&para;<br>from</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>n : UML!ObjectNode&para;<br>to</span><del style="background:#ffe6e6;"> </del><ins style="background:#e6ffe6;">&para;<br></ins><span>a : Intalio!Artifact&para;<br>}&para;<br></span><ins style="background:#e6ffe6;">&para;<br>-- MUTATION "OutPattern Element Modification" from a:Activity to a:BpmnDiagram (line 148:3-150:4 of original transformation)&para;<br>&para;<br>&para;<br>-- MUTATION "Operation Call Modification" from startsWith to oclIsKindOf (line 106:7-106:40 of original transformation)&para;<br>&para;<br>&para;<br>-- MUTATION "Argument Type Modification" from oclAsType:Comment to oclAsType:ProtocolTransition (line 126:6-126:40 of original transformation)&para;<br>&para;<br>&para;<br>-- MUTATION "Iterator Modification" from exists to select (line 54:18-58:5 of original transformation)&para;<br>&para;<br>&para;<br>-- MUTATION "Creation of Binding" associations in activity (line 114:3-117:4 of original transformation)&para;<br>&para;<br>&para;<br>-- MUTATION "Binding-target Modification" from name to pools (line 42:4-42:19 of original transformation)&para;<br>&para;<br></ins>